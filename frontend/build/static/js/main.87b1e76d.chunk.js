(this["webpackJsonpextension-copia"]=this["webpackJsonpextension-copia"]||[]).push([[0],{117:function(e,t){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},124:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(57),o=a.n(c),u=a(10),s=a(2),l=(a(66),a(24)),i=Object(n.createContext)(),m=function(e){var t=e.component,a=Object(l.a)(e,["component"]),c=Object(n.useContext)(i).authenticate;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return!0!==c?r.a.createElement(s.a,{to:"/login"}):r.a.createElement(t,e)}}))},p=a(12),E=a(1),O=a(5),f=Object(n.createContext)();a(71);var b=function(e){var t=e.msg,a=e.categoria;return r.a.createElement("div",{className:a},r.a.createElement("p",null,t))};a(72);var d=function(){var e=Object(n.useContext)(i),t=Object(n.useContext)(f),a=e.message,c=e.signupAction,o=t.alerta,u=t.mostrarAlerta,s=Object(n.useState)({usuario:"",contrasenia:"",email:""}),l=Object(O.a)(s,2),m=l[0],d=l[1];return Object(n.useEffect)((function(){a&&u(a.msg,a.categoria)}),[a]),r.a.createElement(r.a.Fragment,null,null!==o?r.a.createElement(b,{msg:o.msg,categoria:o.categoria}):null,r.a.createElement("form",{className:"signup",onSubmit:function(e){!function(e){e.preventDefault(),m.usuario.trim()?m.email.trim()?m.contrasenia.trim()?(c(m),d({usuario:"",contrasenia:"",email:""})):u("La contrase\xf1a es requerida","error"):u("El email es requerido","error"):u("El usuario es requerido","error")}(e)}},r.a.createElement("input",{type:"text",name:"usuario",value:m.usuario,placeholder:"Nombre de Usuario",onChange:function(e){d(Object(E.a)(Object(E.a)({},m),{},Object(p.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Correo",value:m.email,onChange:function(e){d(Object(E.a)(Object(E.a)({},m),{},Object(p.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"password",name:"contrasenia",value:m.contrasenia,placeholder:"Contrase\xf1a",onChange:function(e){d(Object(E.a)(Object(E.a)({},m),{},Object(p.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"submit",name:"boton-registro",value:"ENVIAR"})))};a(73);var g=function(){var e=Object(n.useContext)(i),t=e.user,a=e.cerrarSesion;return"/messages"===Object(s.g)().pathname?null:r.a.createElement("nav",null,r.a.createElement(u.b,{className:"img",to:"/"},r.a.createElement("img",{src:"logo.svg",alt:"logo"})),r.a.createElement("ul",null,t?r.a.createElement("button",{className:"li",onClick:function(){a()}},"Cerrar Sesion"):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{activeClassName:"active",className:"li",to:"/login"},"Iniciar Sesi\xf3n"),r.a.createElement(u.b,{activeClassName:"active",className:"li",to:"/signup"},"Registrarte"))))},v=a(59),j=a.n(v).a.create({baseURL:"https://fast-stream-17184.herokuapp.com/"}),h=function(e){e?j.defaults.headers.common["x-auth-token"]=e:delete j.defaults.headers.common["x-auth-token"]};a(90);var R=function(e){var t=Object(n.useContext)(i),a=Object(n.useContext)(f),c=t.user,o=t.message,u=t.loginAction,s=a.alerta,l=a.mostrarAlerta,m=Object(n.useState)({usuario:"",contrasenia:""}),d=Object(O.a)(m,2),g=d[0],v=d[1];return Object(n.useEffect)((function(){c&&e.history.push("/messages"),o&&l(o.msg,o.categoria)}),[o,c,e.history]),r.a.createElement(r.a.Fragment,null,null!==s?r.a.createElement(b,{msg:s.msg,categoria:s.categoria}):null,r.a.createElement("form",{className:"login",onSubmit:function(e){!function(e){e.preventDefault(),g.usuario.trim()?g.contrasenia.trim()?u(g):l("La contrase\xf1a es requerida","error"):l("El usuario es requerido","error")}(e)}},r.a.createElement("input",{onChange:function(e){v(Object(E.a)(Object(E.a)({},g),{},Object(p.a)({},e.target.name,e.target.value)))},type:"text",name:"usuario",placeholder:"Nombre de Usuario"}),r.a.createElement("input",{onChange:function(e){v(Object(E.a)(Object(E.a)({},g),{},Object(p.a)({},e.target.name,e.target.value)))},type:"password",name:"contrasenia",placeholder:"Contrase\xf1a"}),r.a.createElement("input",{type:"submit",name:"boton-login",value:"A COPIAR"})))},y=a(33),x=(a(91),a(60)),C=a.n(x)()("https://fast-stream-17184.herokuapp.com/");var _=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(O.a)(o,2),l=s[0],m=s[1],p=Object(n.useContext)(i),E=p.user,f=p.cerrarSesion,b=Object(n.useRef)(null);return Object(n.useEffect)((function(){C.emit("connected",E.usuario),C.on("loadMessages",(function(e){m(e)}))}),[E]),Object(n.useEffect)((function(){C.on("newmessage",(function(e){console.log(e),m([].concat(Object(y.a)(l),[e]))})),null!==b.current&&(b.current.scrollTop=b.current.scrollHeight)}),[m,l]),Object(n.useEffect)((function(){return function(){C.off()}}),[]),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"cabecera"},r.a.createElement("ul",null,E&&!0===E.admin?r.a.createElement(u.b,{to:"/admin"},r.a.createElement("img",{src:"/images/active.svg",alt:"Active"})):null,r.a.createElement(u.b,{to:"/documento"},r.a.createElement("img",{src:"/images/documento.svg",alt:"Documento"})),r.a.createElement("li",{onClick:function(){f()}},r.a.createElement("img",{src:"/images/logout.svg",alt:"Cerrar Sesi\xf3n"})))),r.a.createElement("div",{className:"mensaje",ref:b},l.map((function(e,t){return r.a.createElement("div",{key:t,id:e.usuario===E.usuario?"derecha":"izquierda"},r.a.createElement("span",null,e.usuario),r.a.createElement("p",{key:t},e.mensaje))}))),r.a.createElement("form",{className:"enviar",onSubmit:function(e){!function(e){e.preventDefault(),a.trim()&&(m([].concat(Object(y.a)(l),[{mensaje:a,usuario:E.usuario}])),C.emit("message",{mensaje:a,usuario:E.usuario}),c(""))}(e)}},r.a.createElement("input",{type:"text",name:"escribir-mensaje",placeholder:"Escribe aqu\xed",value:a,onChange:function(e){c(e.target.value)}}),r.a.createElement("input",{type:"submit",name:"enviar-mensaje"})))},A=(a(120),function(e){var t=Object(n.useContext)(i).user;return Object(n.useEffect)((function(){t&&e.history.push("/messages")}),[t,e.history]),r.a.createElement("div",{className:"home"},r.a.createElement("h1",null,"Vamo Copiando xD"))}),I=Object(n.createContext)(),T=(a(121),function(){var e=Object(n.useContext)(I).editarDocumento,t=Object(n.useContext)(f),a=t.alerta,c=t.mostrarAlerta,o=Object(n.useContext)(i),u=o.user,s=o.doc,l=o.obtenerDoc,m=Object(n.useState)(!1),p=Object(O.a)(m,2),E=p[0],d=p[1],g=Object(n.useState)(""),v=Object(O.a)(g,2),j=v[0],h=v[1];return Object(n.useEffect)((function(){l()}),[]),r.a.createElement("div",{className:"text-content"},null!==a?r.a.createElement(b,{msg:a.msg,categoria:a.categoria}):null,!0===u.admin?r.a.createElement("button",{onClick:function(){d(!0)}},"Editar"):null,r.a.createElement("p",null,s||"Hola amikos"),E&&!0===u.admin?r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{value:j,name:"doc",cols:"10",rows:"10",placeholder:"Escribe algo",onChange:function(e){h(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){d(!1),h("")}},"Cancelar"),r.a.createElement("button",{onClick:function(){j.trim()?(e({doc:j}),d(!1),h("")):c("Escribe algo cojones","error")}},"Guardar"))):null)});a(122);var k=function(){var e=Object(n.useContext)(i).user,t=Object(n.useContext)(I),a=t.list,c=t.obtenerUsuarios,o=t.activeUser;return Object(n.useEffect)((function(){null!==e&&c()}),[e]),r.a.createElement("div",null,r.a.createElement("div",{className:"list__users"},null!==a?a.map((function(e){return r.a.createElement("div",{className:"users",key:e._id},r.a.createElement("p",null,e.usuario),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",name:"activar",defaultChecked:e.active,onChange:function(){o({active:!e.active,id:e._id})}}),r.a.createElement("span",{className:"slider round"})))})):null))},N=function(e){var t=e.component,a=Object(l.a)(e,["component"]),c=Object(n.useContext)(i),o=c.authenticate,u=c.user;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return!0!==o&&!0!==(null===u||void 0===u?void 0:u.admin)?r.a.createElement(s.a,{to:"/login"}):r.a.createElement(t,e)}}))},S=localStorage.getItem("token");S&&(console.log(S),h(S));var w=function(){var e=Object(n.useContext)(i).getUser;return Object(n.useEffect)((function(){e()}),[]),r.a.createElement(u.a,null,r.a.createElement(g,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",component:A,exact:!0}),r.a.createElement(s.b,{path:"/login",component:R,exact:!0}),r.a.createElement(s.b,{path:"/signup",component:d,exact:!0}),r.a.createElement(m,{path:"/documento",component:T,exact:!0}),r.a.createElement(m,{path:"/messages",component:_,exact:!0}),r.a.createElement(N,{path:"/admin",component:k,exact:!0})))};a(123),a(124),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(4),D=a.n(U),L=a(11),B=function(e,t){switch(t.type){case"SIGNUP_EXIT":return Object(E.a)(Object(E.a)({},e),{},{message:t.payload});case"DOC_EXITO":return Object(E.a)(Object(E.a)({},e),{},{doc:t.payload});case"OBTENER_USUARIO":return Object(E.a)(Object(E.a)({},e),{},{user:t.payload,authenticate:!0,message:null});case"LOGIN_EXIT":return localStorage.setItem("token",t.payload),Object(E.a)(Object(E.a)({},e),{},{authenticate:!0,message:null});case"DOC_ERROR":case"OBTENER_USUARIO_ERROR":return Object(E.a)({},e);case"ERROR":return Object(E.a)(Object(E.a)({},e),{},{message:t.payload});case"CERRAR_SESION":return localStorage.removeItem("token"),Object(E.a)(Object(E.a)({},e),{},{user:null,authenticate:!1,message:null});default:return e}},X=function(e){var t=Object(n.useReducer)(B,{user:null,authenticate:!1,message:null,doc:null}),a=Object(O.a)(t,2),c=a[0],o=a[1],u=function(){var e=Object(L.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&h(t),e.prev=2,e.next=5,j.get("/api/auth/user");case 5:a=e.sent,o({type:"OBTENER_USUARIO",payload:a.data.usuario}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:"CERRAR_SESION"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(L.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/api/auth/login",t);case 3:a=e.sent,o({type:"LOGIN_EXIT",payload:a.data.token}),u(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,categoria:"error"},o({type:"ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(L.a)(D.a.mark((function e(t){var a,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/api/auth/signup",t);case 3:a=e.sent,n={msg:a.data.msg,categoria:"exito"},o({type:"SIGNUP_EXIT",payload:n}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,categoria:"error"},o({type:"ERROR",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(L.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/api/auth/doc");case 3:t=e.sent,o({type:"DOC_EXITO",payload:t.data.doc[0].doc}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"DOC_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(L.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.delete("/api/auth/");case 3:e.sent,o({type:"CERRAR_SESION"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"DOC_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(i.Provider,{value:{user:c.user,authenticate:c.authenticate,message:c.message,doc:c.doc,loginAction:s,signupAction:l,getUser:u,cerrarSesion:p,obtenerDoc:m}},e.children)},M=function(e,t){switch(t.type){case"MOSTRAR_ALERTA":return{alerta:t.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},q=function(e){var t=Object(n.useReducer)(M,{alerta:null}),a=Object(O.a)(t,2),c=a[0],o=a[1];return r.a.createElement(f.Provider,{value:{alerta:c.alerta,mostrarAlerta:function(e,t){o({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:t}}),setTimeout((function(){o({type:"OCULTAR_ALERTA"})}),2e3)}}},e.children)},P=function(e,t){switch(t.type){case"EDITAR_DOCUMENTO_EXITO":return Object(E.a)({},e);case"EDITAR_ACTIVE_EXITO":var a=e.list.map((function(e){return e._id===t.payload._id?t.payload:e}));return Object(E.a)(Object(E.a)({},e),{},{list:a});case"OBTENER_USUARIO":return Object(E.a)(Object(E.a)({},e),{},{list:t.payload});case"OBTENER_USUARIO_ERROR":case"EDITAR_DOCUMENTO_ERROR":return Object(E.a)({},e);default:return e}},G=function(e){var t=Object(n.useReducer)(P,{message:null,list:null}),a=Object(O.a)(t,2),c=a[0],o=a[1],u=function(){var e=Object(L.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/api/admin/");case 3:t=e.sent,o({type:"OBTENER_USUARIO",payload:t.data.listUser}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"OBTENER_USUARIO_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(L.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/api/admin/active",t);case 3:a=e.sent,o({type:"EDITAR_ACTIVE_EXITO",payload:a.data.userDB}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"EDITAR_ACTIVE_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(L.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/api/admin/doc",t);case 3:e.sent,o({type:"EDITAR_DOCUMENTO_EXITO"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"EDITAR_DOCUMENTO_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(I.Provider,{value:{message:c.message,list:c.list,obtenerUsuarios:u,activeUser:s,editarDocumento:l}},e.children)};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null,r.a.createElement(G,null,r.a.createElement(q,null,r.a.createElement(w,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,a){e.exports=a(126)},66:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.87b1e76d.chunk.js.map